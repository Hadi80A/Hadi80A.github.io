import{_ as u}from"./DatePicker-a06d0746.js";import{a as r}from"./axios-4a70c6fc.js";import{_ as m,a as d,o as f,c as _,b as o,f as a,w as n,v as l,h}from"./index-dead0782.js";r.defaults.baseURL="https://bookingmastermind.pythonanywhere.com";const k={components:{DatePicker:u},data:()=>({first_name:"",last_name:"",email:"",phone:"",address:"",birthdate:""}),mounted(){this.refresh_token(),this.token=this.$cookies.get("token"),console.log(this.token),r.defaults.headers.common.Authorization=`Bearer ${this.token}`,r.get("/users/",{}).then(e=>{console.log(e.data[0].email)}).catch(e=>{console.log(e)})},methods:{submit(){this.token=this.$cookies.get("token"),this.token==null&&(this.refresh_token(),this.token=this.$cookies.get("token")),r.put("/edit-profile/"+this.phone+"/",{first_name:this.first_name,last_name:this.last_name,email:this.email,phone:this.phone,address:this.address,birthdate:this.birthdate},{headers:{Authorization:"Bearer "+this.token}}).then(e=>{this.success("successful")}).catch(e=>{this.error("error")})},refresh_token(){if(this.refresh=this.$cookies.get("refresh"),this.refresh==null){this.$router.push("/login");return}r.post("/token/refresh/",{refresh:this.refresh}).then(e=>{this.$cookies.set("token",e.data.access,{expires:"5m"})}).catch(e=>{console.log(e)})}}},b={class:"flex flex-col gap-2 p-10 rounded-2xl shadow-2xl shadow-blue-600 hover:shadow-blue-700 bg-white bg-opacity-90 h-full transition-all"},v={class:"row"},g={class:"row"},w={class:"row"},$={class:"row"},V={class:"row"},y={class:"row"},B={class:"flex py-1"};function U(e,s,N,P,C,c){const i=d("font-awesome-icon"),p=d("DatePicker");return f(),_("div",b,[o("div",v,[a(i,{icon:"fa-solid fa-font",class:"icon"}),n(o("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>e.first_name=t),class:"input",placeholder:"First Name"},null,512),[[l,e.first_name]])]),o("div",g,[a(i,{icon:"fa-solid fa-signature",class:"icon"}),n(o("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>e.last_name=t),class:"input",placeholder:"Last Name"},null,512),[[l,e.last_name]])]),o("div",w,[a(i,{icon:"fa-solid fa-phone",class:"icon"}),n(o("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>e.phone=t),class:"input",placeholder:"Phone Number"},null,512),[[l,e.phone]])]),o("div",$,[a(i,{icon:"fa-solid fa-at",class:"icon"}),n(o("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>e.email=t),class:"input",placeholder:"Email"},null,512),[[l,e.email]])]),o("div",V,[a(p,{id:"Birthday",value:e.birthdate,"onUpdate:value":s[4]||(s[4]=t=>e.birthdate=t),placeholder:"Birthday","custom-class":"bg-gray-200 px-2 w-32 h-10 "},null,8,["value"])]),o("div",y,[a(i,{icon:"fa-solid fa-map-location-dot",class:"icon"}),n(o("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>e.address=t),class:"input",placeholder:"Address"},null,512),[[l,e.address]])]),o("div",B,[o("button",{class:"button_submit",onClick:s[6]||(s[6]=t=>c.submit())},[a(i,{icon:"fa-regular fa-paper-plane"}),h(" Submit ")]),o("button",{class:"button_cancel",onClick:s[7]||(s[7]=t=>this.$router.go(-1))},[a(i,{icon:"fa-solid fa-xmark"}),h(" Cancel ")])])])}const z=m(k,[["render",U],["__scopeId","data-v-738be326"]]);export{z as default};
